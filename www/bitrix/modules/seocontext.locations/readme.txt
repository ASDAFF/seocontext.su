Инструкция по установке

После установки модуля выполните следующие шаги:

1. Перейдите в sql-консоль и выполните по очереди запросы:
create index IX_B_SALE_LOC_MARGINS on b_sale_location (LEFT_MARGIN, RIGHT_MARGIN);
create index IX_B_SALE_LOC_MARGINS_REV on b_sale_location (RIGHT_MARGIN, LEFT_MARGIN);
create index IX_B_SALE_LOC_PARENT on b_sale_location (PARENT_ID);
create index IX_B_SALE_LOC_DL on b_sale_location (DEPTH_LEVEL);
create index IX_B_SALE_LOC_TYPE on b_sale_location (TYPE_ID);
create index IX_B_SALE_LOC_NAME_NAME_U on b_sale_loc_name (NAME_UPPER);
create index IX_B_SALE_LOC_NAME_LI_LI on b_sale_loc_name (LOCATION_ID, LANGUAGE_ID);

2. Перейдите в администраторскую панель. Магазин -> Настройки -> Местоположения -> Импорт местоположений и импортируйте нужные вам регионы, города. По окончании импорта произведите переиндексацию сайта.

3. Укажите папку для сохранения отображаемого контента соответствующей локации. Сделать это можно через компонент Условная включаемая область. Перейдите в параметры компонента и заполните поле "Папка для файлов контента /:".

4. В основных параметрах компонента выберите вариант "По умолчанию" и отредактируйте его контент на свое усмотрение. Нажмите "Сохранить". Это необходимо для того, чтобы у любого города было описание по умолчанию, если вы ранее не редактировали контент данного местоположения.


Немного о компонентах

У вас появятся 2 новых компонента:
1) Местоположение пользователя - определяет текущее местоположение пользователя по ip.
2) Условная включаемая область - отображает контент соответствующий установленной локации.

В Группах местоположений появится новая группа с символьным кодом Favourite_locations. Все местоположения, описания которых вы сохраните через компонент(Условная включаемая область), будут добавлены в эту группу, а их описания будут сохранены в указанной вами папке.

Описания городов хранятся в файлах в формате <код местоположения>.html. Так же в этой папке должен находиться файл default.html - это содержимое "По умолчанию".